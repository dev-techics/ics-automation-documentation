"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[4231],{7101:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Backend/architecture","title":"Architecture","description":"This is the system architecture of our client communication and marketing automation platform.","source":"@site/docs/Backend/architecture.md","sourceDirName":"Backend","slug":"/Backend/architecture","permalink":"/docs/Backend/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Backend/architecture.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Installation & Setup","permalink":"/docs/Backend/installation-&-setup"},"next":{"title":"Configuration","permalink":"/docs/Backend/configuration"}}');var r=i(4848),t=i(8453);const d={sidebar_position:3},l="Architecture",c={},a=[{value:"2. Backend API (Laravel)",id:"2-backend-api-laravel",level:3},{value:"Main Controller Modules",id:"main-controller-modules",level:4},{value:"3. Database (MySQL)",id:"3-database-mysql",level:3},{value:"Core Tables (as of latest migration state)",id:"core-tables-as-of-latest-migration-state",level:4},{value:"4. Queue &amp; Job Processing (Critical for Scale)",id:"4-queue--job-processing-critical-for-scale",level:3},{value:"5. Third-Party Integrations",id:"5-third-party-integrations",level:3},{value:"Data Flow Example: Sending a Campaign",id:"data-flow-example-sending-a-campaign",level:2},{value:"Security &amp; Best Practices",id:"security--best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,r.jsxs)(n.p,{children:["This is the system architecture of our client communication and marketing automation platform.\r\n",(0,r.jsx)(n.img,{alt:"System Architecture Diagram",src:i(9734).A+"",width:"4290",height:"1156"})]}),"\n",(0,r.jsx)(n.p,{children:"This is a full-stack client communication platform with the following technology stack:"}),"\n",(0,r.jsx)(n.h3,{id:"2-backend-api-laravel",children:"2. Backend API (Laravel)"}),"\n",(0,r.jsxs)(n.p,{children:["All requests are routed through Laravel's API routes (",(0,r.jsx)(n.code,{children:"routes/api.php"}),")."]}),"\n",(0,r.jsx)(n.h4,{id:"main-controller-modules",children:"Main Controller Modules"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Module"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Key Features"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"FlowController"})}),(0,r.jsx)(n.td,{children:"Orchestrates communication campaigns"}),(0,r.jsx)(n.td,{children:"Triggers jobs, manages flow logic"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TemplateController"})}),(0,r.jsx)(n.td,{children:"Manage email & SMS templates"}),(0,r.jsx)(n.td,{children:"CRUD + preview"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"ClientController"})}),(0,r.jsx)(n.td,{children:"Individual client CRUD operations"}),(0,r.jsx)(n.td,{children:"Profile, tags, custom fields"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"ClientListController"})}),(0,r.jsx)(n.td,{children:"Segmented client lists & filters"}),(0,r.jsx)(n.td,{children:"Dynamic segments, export"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"MemberImportController"})}),(0,r.jsx)(n.td,{children:"Bulk import from CSV/Excel"}),(0,r.jsx)(n.td,{children:"Validation, mapping, queue processing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CmsController"})}),(0,r.jsx)(n.td,{children:"Static content & landing pages"}),(0,r.jsx)(n.td,{children:"Pages, assets, SEO"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SendGridWebhookController"})}),(0,r.jsx)(n.td,{children:"Receive SendGrid event webhooks"}),(0,r.jsx)(n.td,{children:"Bounce, click, open, spam handling"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SendmodeWebhookController"})}),(0,r.jsx)(n.td,{children:"Receive Sendmode SMS delivery webhooks"}),(0,r.jsx)(n.td,{children:"Delivered, failed, replies"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"3-database-mysql",children:"3. Database (MySQL)"}),"\n",(0,r.jsxs)(n.p,{children:["The application uses ",(0,r.jsx)(n.strong,{children:"MySQL"})," as its primary relational database. All business-critical data is stored in well-structured, version-controlled tables created via Laravel migrations with prefix ",(0,r.jsx)(n.code,{children:"ics_automation"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["You can change prefix form ",(0,r.jsx)(n.code,{children:"config\\database.php"})]}),"\n",(0,r.jsx)(n.h4,{id:"core-tables-as-of-latest-migration-state",children:"Core Tables (as of latest migration state)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Table"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"clients"})}),(0,r.jsx)(n.td,{children:"Individual client records with personal data & custom fields"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"client_lists"})}),(0,r.jsx)(n.td,{children:"Client segmentation lists (static & dynamic)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"templates"})}),(0,r.jsx)(n.td,{children:"Email and SMS templates (subject, HTML/text content, variables)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"flows"})}),(0,r.jsx)(n.td,{children:"Marketing/communication campaigns and automation workflows"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"flow_executions"})}),(0,r.jsx)(n.td,{children:"Individual campaign runs with status, stats, and scheduling"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"stats"})}),(0,r.jsx)(n.td,{children:"Aggregated per-campaign statistics (sent, delivered, opened, etc.)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sendmode_stats"})}),(0,r.jsx)(n.td,{children:"SMS-specific delivery statistics from Sendmode"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"jobs"})}),(0,r.jsx)(n.td,{children:"Laravel queue jobs (for async email/SMS sending)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"failed_jobs"})}),(0,r.jsx)(n.td,{children:"Failed queue jobs for monitoring and retry"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"unsubscribed"})}),(0,r.jsx)(n.td,{children:"Global and per-flow unsubscribe tracking"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"cache"})}),(0,r.jsx)(n.td,{children:"Laravel cache table (optional, when using database driver)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"migrations"})}),(0,r.jsx)(n.td,{children:"Tracks applied database migrations (shown in your screenshot)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"4-queue--job-processing-critical-for-scale",children:"4. Queue & Job Processing (Critical for Scale)"}),"\n",(0,r.jsxs)(n.p,{children:["All message sending is ",(0,r.jsx)(n.strong,{children:"asynchronous"}),":\r\nFlow Execution\r\n\u2193\r\nDispatch Laravel Jobs \u2192 Queue Worker\r\n\u2193\r\nMessaging Service\r\n\u2193\r\n\u251c\u2500\u2500 SendGrid API (Email)\r\n\u2514\u2500\u2500 Sendmode API (SMS)\r\ntextBenefits:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Prevents timeout on large campaigns"}),"\n",(0,r.jsx)(n.li,{children:"Retry logic on failure"}),"\n",(0,r.jsx)(n.li,{children:"Rate limiting compliance"}),"\n",(0,r.jsx)(n.li,{children:"Real-time progress tracking"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-third-party-integrations",children:"5. Third-Party Integrations"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Provider"}),(0,r.jsx)(n.th,{children:"Integration Type"}),(0,r.jsx)(n.th,{children:"Endpoint Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"SendGrid"}),(0,r.jsx)(n.td,{children:"Email"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"POST https://api.sendgrid.com/v3/mail/send"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sendmode"}),(0,r.jsx)(n.td,{children:"SMS"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"POST https://api.sendmode.com/v1/messages"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Webhook routes are protected with signature verification."}),"\n",(0,r.jsx)(n.h2,{id:"data-flow-example-sending-a-campaign",children:"Data Flow Example: Sending a Campaign"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"User creates campaign in React frontend"}),"\n",(0,r.jsxs)(n.li,{children:["Frontend \u2192 ",(0,r.jsx)(n.code,{children:"POST /api/flows/{id}/send"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"FlowController@send()"})," validates & dispatches job"]}),"\n",(0,r.jsx)(n.li,{children:"Job picked up by queue worker"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SendEmailJob"})," or ",(0,r.jsx)(n.code,{children:"SendSmsJob"})," executed"]}),"\n",(0,r.jsx)(n.li,{children:"API call to SendGrid / Sendmode"}),"\n",(0,r.jsx)(n.li,{children:"Provider sends message \u2192 returns tracking ID"}),"\n",(0,r.jsx)(n.li,{children:"Events (open, click, bounce) \u2192 webhook \u2192 stored in DB"}),"\n",(0,r.jsx)(n.li,{children:"Frontend polls or uses WebSocket for live stats"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security--best-practices",children:"Security & Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"API protected by Sanctum + middleware"}),"\n",(0,r.jsx)(n.li,{children:"Rate limiting on all endpoints"}),"\n",(0,r.jsx)(n.li,{children:"Webhook signature verification"}),"\n",(0,r.jsx)(n.li,{children:"Queue failed jobs stored & retried"}),"\n",(0,r.jsxs)(n.li,{children:["All external API keys in ",(0,r.jsx)(n.code,{children:".env"})]}),"\n",(0,r.jsx)(n.li,{children:"Database migrations & seeders versioned"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/api/introduction",children:"API Reference"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/deployment/queue",children:"Queue Configuration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/integrations/webhooks",children:"Webhook Setup Guide"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Last updated: November 2025"}),"\r\nHow to use:"]}),"\n",(0,r.jsx)(n.p,{children:"Place your diagram at static/img/architecture-diagram.png\r\nCopy the markdown above into docs/architecture.md\r\nRun npm run start \u2014 it will render beautifully in Docusaurus"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}},9734:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/architecture-1e0ac9a0d2e4ae87cd32a95747833a01.png"}}]);